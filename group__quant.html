<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Libpolycomp: Floating-point quantization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Libpolycomp
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A compression/decompression library that implements the polynomial compression and other simple compression schemes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__quant.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Floating-point quantization</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab9208c1ea9cee49df4b111afdfbcccf0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#gab9208c1ea9cee49df4b111afdfbcccf0">pcomp_init_quant_params</a> (size_t element_size, size_t bits_per_sample)</td></tr>
<tr class="memdesc:gab9208c1ea9cee49df4b111afdfbcccf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a pcomp_quant_params_t structure.  <a href="#gab9208c1ea9cee49df4b111afdfbcccf0">More...</a><br /></td></tr>
<tr class="separator:gab9208c1ea9cee49df4b111afdfbcccf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b8e5c5e6c11b023137b055671874f33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga2b8e5c5e6c11b023137b055671874f33">pcomp_free_quant_params</a> (<a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:ga2b8e5c5e6c11b023137b055671874f33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a pcomp_quant_params_t structure.  <a href="#ga2b8e5c5e6c11b023137b055671874f33">More...</a><br /></td></tr>
<tr class="separator:ga2b8e5c5e6c11b023137b055671874f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98b7fbc9f7b776d0fcc278920413ad83"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga98b7fbc9f7b776d0fcc278920413ad83">pcomp_quant_element_size</a> (const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:ga98b7fbc9f7b776d0fcc278920413ad83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size (in bytes) of the elements to be quantized.  <a href="#ga98b7fbc9f7b776d0fcc278920413ad83">More...</a><br /></td></tr>
<tr class="separator:ga98b7fbc9f7b776d0fcc278920413ad83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67f332fd38dc9b1144a8d454168ff292"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga67f332fd38dc9b1144a8d454168ff292"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga67f332fd38dc9b1144a8d454168ff292">pcomp_quant_bits_per_sample</a> (const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:ga67f332fd38dc9b1144a8d454168ff292"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of bits that must be used for each quantized sample. <br /></td></tr>
<tr class="separator:ga67f332fd38dc9b1144a8d454168ff292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35bf025a0609a9b895a39692c61912eb"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga35bf025a0609a9b895a39692c61912eb">pcomp_quant_normalization</a> (const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:ga35bf025a0609a9b895a39692c61912eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the normalization constant used for converting floating-point numbers into quantized integers.  <a href="#ga35bf025a0609a9b895a39692c61912eb">More...</a><br /></td></tr>
<tr class="separator:ga35bf025a0609a9b895a39692c61912eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2549d913abc3ffa153a2b5bef4740969"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga2549d913abc3ffa153a2b5bef4740969">pcomp_quant_offset</a> (const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:ga2549d913abc3ffa153a2b5bef4740969"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the additive constant used for converting floating-point numbers into quantized integers.  <a href="#ga2549d913abc3ffa153a2b5bef4740969">More...</a><br /></td></tr>
<tr class="separator:ga2549d913abc3ffa153a2b5bef4740969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga100ea5103e6c879e80f507c5ed567cdd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga100ea5103e6c879e80f507c5ed567cdd">pcomp_quant_set_normalization</a> (<a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params, double normalization, double offset)</td></tr>
<tr class="memdesc:ga100ea5103e6c879e80f507c5ed567cdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the normalization constants (multiplicative and additive) used to quantize floating-point numbers.  <a href="#ga100ea5103e6c879e80f507c5ed567cdd">More...</a><br /></td></tr>
<tr class="separator:ga100ea5103e6c879e80f507c5ed567cdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e51dba7a22b5006ceb2b45d7de50fd9"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga3e51dba7a22b5006ceb2b45d7de50fd9">pcomp_quant_bufsize</a> (size_t input_size, const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:ga3e51dba7a22b5006ceb2b45d7de50fd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size (in bytes) of the buffer that will contain a quantized stream of <em>input_size</em> floating point values.  <a href="#ga3e51dba7a22b5006ceb2b45d7de50fd9">More...</a><br /></td></tr>
<tr class="separator:ga3e51dba7a22b5006ceb2b45d7de50fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga795efb02ae2054c43b1a75487e2eb26c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#ga795efb02ae2054c43b1a75487e2eb26c">pcomp_compress_quant_double</a> (void *output_buf, size_t *output_size, const double *input_buf, size_t input_size, <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:ga795efb02ae2054c43b1a75487e2eb26c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quantize a stream of 64-bit floating point numbers.  <a href="#ga795efb02ae2054c43b1a75487e2eb26c">More...</a><br /></td></tr>
<tr class="separator:ga795efb02ae2054c43b1a75487e2eb26c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaec9b081b2c43a4e8c3bbd727bcc0c76"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__quant.html#gaaec9b081b2c43a4e8c3bbd727bcc0c76">pcomp_compress_quant_float</a> (void *output_buf, size_t *output_size, const float *input_buf, size_t input_size, <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *params)</td></tr>
<tr class="memdesc:gaaec9b081b2c43a4e8c3bbd727bcc0c76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quantize a stream of 32-bit floating point numbers.  <a href="#gaaec9b081b2c43a4e8c3bbd727bcc0c76">More...</a><br /></td></tr>
<tr class="separator:gaaec9b081b2c43a4e8c3bbd727bcc0c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h3>The algorithm and its applicability</h3>
<p>The quantization compression is applicable only to series of floating-point numbers. It works by converting the series into a sequence of integer numbers, whose bit size is less than the number of bits required for the input numbers.</p>
<p>This compression scheme works well for data acquired by means of some digital process. Typically, the bitsize of such samples is smaller than 32 or 64 bits: in such cases, this encoding allows to achieve good compression ratios with negligible loss of information.</p>
<p>This kind of compression is lossy, because the decompressed stream is not identical to the stream before the compression. It is possible to prove that, under quite general assumptions, the difference between the two is a stream of zero-average random numbers. This stream of residuals follows a symmetric, non-Gaussian distribution whose RMS is <img class="formulaInl" alt="$q^2/12$" src="form_10.png"/>, where <img class="formulaInl" alt="$q$" src="form_11.png"/> is the quantization step (i.e., <img class="formulaInl" alt="$q = 2^{-N}$" src="form_12.png"/>, where <img class="formulaInl" alt="$N$" src="form_3.png"/> is the number of bits used in the quantization).</p>
<h3>Implementation details</h3>
<p>Before compressing the data, the caller must initialize an opaque structure, pcomp_quant_params_t, that contains information about the quantization process. Such structure is created via a call to <a class="el" href="group__quant.html#gab9208c1ea9cee49df4b111afdfbcccf0">pcomp_init_quant_params</a> and freed by <a class="el" href="group__quant.html#ga2b8e5c5e6c11b023137b055671874f33">pcomp_free_quant_params</a>. Access to the fields of the structure is only possible through the following functions:</p>
<ul>
<li><a class="el" href="group__quant.html#ga98b7fbc9f7b776d0fcc278920413ad83">pcomp_quant_element_size</a></li>
<li><a class="el" href="group__quant.html#ga67f332fd38dc9b1144a8d454168ff292">pcomp_quant_bits_per_sample</a></li>
<li>pcomp_quant_min_value</li>
<li><a class="el" href="group__quant.html#ga35bf025a0609a9b895a39692c61912eb">pcomp_quant_normalization</a></li>
</ul>
<p>The caller must pre-allocate the buffer that will hold the quantized stream. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga795efb02ae2054c43b1a75487e2eb26c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcomp_compress_quant_double </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>output_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>output_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>input_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quantize a stream of 64-bit floating point numbers. </p>
<p>This function applies a quantization formula to all the numbers in the array <em>input_buf</em>. It saves the result as a stream of raw bytes in <em>output_buf</em>.</p>
<p>An usage example of the function is the following, which uses 5 bits per every 64-bit input value: </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> input_buf[] = { 3.06, 5.31, 2.25, 7.92, 4.86 };</div>
<div class="line"><span class="keywordtype">size_t</span> input_size = <span class="keyword">sizeof</span>(input_buf) / <span class="keyword">sizeof</span>(input_buf[0]);</div>
<div class="line"><a class="code" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a>* params;</div>
<div class="line"><span class="keywordtype">size_t</span> output_size;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> bits_per_element = 5;</div>
<div class="line"></div>
<div class="line">params = <a class="code" href="group__quant.html#gab9208c1ea9cee49df4b111afdfbcccf0">pcomp_init_quant_params</a>(<span class="keyword">sizeof</span>(input_buf[0]),</div>
<div class="line">                                 bits_per_element);</div>
<div class="line">output_size = <a class="code" href="group__quant.html#ga3e51dba7a22b5006ceb2b45d7de50fd9">pcomp_quant_bufsize</a>(input_size, params);</div>
<div class="line"><a class="code" href="group__quant.html#ga795efb02ae2054c43b1a75487e2eb26c">pcomp_compress_quant_double</a>(output_buf, &amp;output_size, input_buf,</div>
<div class="line">                            input_size, params);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">output_buf</td><td>Pointer to the buffer that will contain the quantized values</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">output_size</td><td>Pointer to a variable containing the number of bytes allocated for <em>output_buf</em>. This number must be at least equal to the return value of the function <a class="el" href="group__quant.html#ga3e51dba7a22b5006ceb2b45d7de50fd9">pcomp_quant_bufsize</a>. On exit, this will contain the actual number of bytes written to <em>output_buf</em>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_buf</td><td>Pointer to the array of 64-bit floating points to quantize</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_size</td><td>Number of 64-bit floating point <em>elements</em> (not bytes) in the array <em>input_buf</em> that must be quantized.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>Structure defining the details of the quantization. It should be created via a call to <a class="el" href="group__quant.html#gab9208c1ea9cee49df4b111afdfbcccf0">pcomp_init_quant_params</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PCOMP_STAT_SUCCESS if the encoding completed successfully. Otherwise, the error code specifies the kind of error occurred during the call. </dd></dl>

</div>
</div>
<a class="anchor" id="gaaec9b081b2c43a4e8c3bbd727bcc0c76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcomp_compress_quant_float </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>output_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>output_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *&#160;</td>
          <td class="paramname"><em>input_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quantize a stream of 32-bit floating point numbers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">output_buf</td><td>Pointer to the buffer that will contain the quantized values</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">output_size</td><td>Pointer to a variable containing the number of bytes allocated for <em>output_buf</em>. This number must be at least equal to the return value of the function <a class="el" href="group__quant.html#ga3e51dba7a22b5006ceb2b45d7de50fd9">pcomp_quant_bufsize</a>. On exit, this will contain the actual number of bytes written to <em>output_buf</em>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_buf</td><td>Pointer to the array of 32-bit floating points to quantize</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_size</td><td>Number of 32-bit floating point <em>elements</em> (not bytes) in the array <em>input_buf</em> that must be quantized.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>Structure defining the details of the quantization. It should be created via a call to <a class="el" href="group__quant.html#gab9208c1ea9cee49df4b111afdfbcccf0">pcomp_init_quant_params</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PCOMP_STAT_SUCCESS if the encoding completed successfully. Otherwise, the error code specifies the kind of error occurred during the call. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2b8e5c5e6c11b023137b055671874f33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcomp_free_quant_params </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a pcomp_quant_params_t structure. </p>
<p>Free the memory associated with the structured pointed by <em>params</em>. Such structure must have been allocated via a call to <a class="el" href="group__quant.html#gab9208c1ea9cee49df4b111afdfbcccf0">pcomp_init_quant_params</a>.</p>
<p>If <em>params</em> is <code>NULL</code>, the function does nothing.</p>
<p>[in] params Pointer to the structure to free. </p>

<p>Definition at line <a class="el" href="quant_8c_source.html#l00128">128</a> of file <a class="el" href="quant_8c_source.html">quant.c</a>.</p>

</div>
</div>
<a class="anchor" id="gab9208c1ea9cee49df4b111afdfbcccf0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a>* pcomp_init_quant_params </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>element_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bits_per_sample</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a pcomp_quant_params_t structure. </p>
<p>The function returns a pointer to a heap-allocated structure. It must be freed by the caller once is no longer used via a call to <a class="el" href="group__quant.html#ga2b8e5c5e6c11b023137b055671874f33">pcomp_free_quant_params</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">element_size</td><td>Width (in bytes) of the values to be quantized. It can either be 4 (32-bit floating points) or 8 (64-bit floating points), but the function does not enforce this.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bits_per_sample</td><td>Number of bits to be used for each sample after quantization. This value should be less than the number of bits used in the input floating-point numbers, in order to achieve a compression ratio greater than 1.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the newly created pcomp_quant_params_t structure. </dd></dl>

<p>Definition at line <a class="el" href="quant_8c_source.html#l00104">104</a> of file <a class="el" href="quant_8c_source.html">quant.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga3e51dba7a22b5006ceb2b45d7de50fd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t pcomp_quant_bufsize </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the size (in bytes) of the buffer that will contain a quantized stream of <em>input_size</em> floating point values. </p>
<p>Unlike functions like <a class="el" href="group___r_l_e.html#gac092b6d2dd746e65f8a514acdc558eae">pcomp_rle_bufsize</a>, the value returned by this function is exact, not an upper bound. It represents the number of <em>bytes</em> needed to store all the compressed floating point values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">input_size</td><td>Number of elements to compress</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>Parameters describing the quantization process (created by <a class="el" href="group__quant.html#gab9208c1ea9cee49df4b111afdfbcccf0">pcomp_init_quant_params</a>)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The size in bytes of the buffer needed to hold all the <em>input_size</em> compressed values. </dd></dl>

<p>Definition at line <a class="el" href="quant_8c_source.html#l00244">244</a> of file <a class="el" href="quant_8c_source.html">quant.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga98b7fbc9f7b776d0fcc278920413ad83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t pcomp_quant_element_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the size (in bytes) of the elements to be quantized. </p>
<dl class="section return"><dt>Returns</dt><dd>Either 4 (32-bit floating points) or 8 (64-bit floating points). </dd></dl>

<p>Definition at line <a class="el" href="quant_8c_source.html#l00142">142</a> of file <a class="el" href="quant_8c_source.html">quant.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga35bf025a0609a9b895a39692c61912eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pcomp_quant_normalization </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the normalization constant used for converting floating-point numbers into quantized integers. </p>
<p>See <a class="el" href="group__quant.html#ga100ea5103e6c879e80f507c5ed567cdd">pcomp_quant_set_normalization</a> for further information. </p>

<p>Definition at line <a class="el" href="quant_8c_source.html#l00170">170</a> of file <a class="el" href="quant_8c_source.html">quant.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga2549d913abc3ffa153a2b5bef4740969"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double pcomp_quant_offset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the additive constant used for converting floating-point numbers into quantized integers. </p>
<p>See <a class="el" href="group__quant.html#ga100ea5103e6c879e80f507c5ed567cdd">pcomp_quant_set_normalization</a> for further information. </p>

<p>Definition at line <a class="el" href="quant_8c_source.html#l00185">185</a> of file <a class="el" href="quant_8c_source.html">quant.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga100ea5103e6c879e80f507c5ed567cdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcomp_quant_set_normalization </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct____pcomp__quant__params__t.html">pcomp_quant_params_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>normalization</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the normalization constants (multiplicative and additive) used to quantize floating-point numbers. </p>
<p>This function allows to change the quantization transform described by <em>params</em> via the two additive values <img class="formulaInl" alt="$S$" src="form_13.png"/> (<em>normalization</em>) and <img class="formulaInl" alt="$\Delta$" src="form_14.png"/> (<em>offset</em>) used in the formula </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[x_\mathrm{out} = [S \times x_\mathrm{in} + \Delta]\]" src="form_15.png"/>
</p>
<p>, where square brackets denote a rounding operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>Pointer to the pcomp_quant_params_t structure to modify</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">normalization</td><td>New value for the multiplicative constant <img class="formulaInl" alt="$S$" src="form_13.png"/></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>New value for the additive constant <img class="formulaInl" alt="$\Delta$" src="form_14.png"/> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="quant_8c_source.html#l00212">212</a> of file <a class="el" href="quant_8c_source.html">quant.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Oct 25 2015 07:42:34 for Libpolycomp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
