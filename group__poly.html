<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Libpolycomp: Polynomial compression</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Libpolycomp
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A compression/decompression library that implements the polynomial compression and other simple compression schemes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__poly.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Polynomial compression</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafa3292680395741f74f5db0177f2a07b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__poly.html#gafa3292680395741f74f5db0177f2a07b">pcomp_init_poly_fit</a> (size_t num_of_samples, size_t num_of_coeffs)</td></tr>
<tr class="memdesc:gafa3292680395741f74f5db0177f2a07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new instance of the pcomp_poly_fit_data_t structure on the heap.  <a href="#gafa3292680395741f74f5db0177f2a07b">More...</a><br /></td></tr>
<tr class="separator:gafa3292680395741f74f5db0177f2a07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8e5a21c4a3478a398b08d4d7e0385ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__poly.html#gac8e5a21c4a3478a398b08d4d7e0385ea">pcomp_free_poly_fit</a> (<a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *poly_fit)</td></tr>
<tr class="memdesc:gac8e5a21c4a3478a398b08d4d7e0385ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free an instance of the pcomp_poly_fit_data_t that has been allocated via a call to <a class="el" href="group__poly.html#gafa3292680395741f74f5db0177f2a07b">pcomp_init_poly_fit</a>.  <a href="#gac8e5a21c4a3478a398b08d4d7e0385ea">More...</a><br /></td></tr>
<tr class="separator:gac8e5a21c4a3478a398b08d4d7e0385ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa12ceda9b06ff4d60c21f719da8bd942"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__poly.html#gaa12ceda9b06ff4d60c21f719da8bd942">pcomp_poly_fit_num_of_samples</a> (const <a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *poly_fit)</td></tr>
<tr class="memdesc:gaa12ceda9b06ff4d60c21f719da8bd942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of samples to be used in a polynomial fit.  <a href="#gaa12ceda9b06ff4d60c21f719da8bd942">More...</a><br /></td></tr>
<tr class="separator:gaa12ceda9b06ff4d60c21f719da8bd942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafeec2bb424071797103a20b21d16922c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__poly.html#gafeec2bb424071797103a20b21d16922c">pcomp_poly_fit_num_of_coeffs</a> (const <a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *poly_fit)</td></tr>
<tr class="memdesc:gafeec2bb424071797103a20b21d16922c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of coefficients of the least-squares fitting polynomial.  <a href="#gafeec2bb424071797103a20b21d16922c">More...</a><br /></td></tr>
<tr class="separator:gafeec2bb424071797103a20b21d16922c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc5eb759afb7304280d28e1ca53c8ff4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__poly.html#gabc5eb759afb7304280d28e1ca53c8ff4">pcomp_run_poly_fit</a> (<a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *poly_fit, double *coeffs, const double *points)</td></tr>
<tr class="memdesc:gabc5eb759afb7304280d28e1ca53c8ff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates a polynomial least-squares fit.  <a href="#gabc5eb759afb7304280d28e1ca53c8ff4">More...</a><br /></td></tr>
<tr class="separator:gabc5eb759afb7304280d28e1ca53c8ff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h3>The algorithm and its applicability</h3>
<p>Polynomial compression relies on a simple idea, that is to divide the input data stream into subsets of consecutive samples (called "chunks"), and to approximate each chunk by means of a polynomial. Such compression is inherently lossy, as the residuals of the fitting procedure are usually discarded.</p>
<p>This idea has been widely applied in the literature. Libpolycomp implements a significant improvement over it, because in case the polynomial used for the fitting is not good enough (i.e., the magnitude of the residuals is larger than the desired error threshold) it saves selected components of the Chebyshev transform of the residuals together with the polynomial.</p>
<p>It is possible to avoid the usage of Chebyshev transforms. In this case, if no polynomial of the desired degree are able to fit the data with the given error threshold, the data for that chunk is saved uncompressed.</p>
<p>This works quite well for smooth data series, where changes between consecutive samples are well described by slowly varying continuous functions. It is not suitable if the signal contains noise, unless this noise is significantly smaller than the signal and than the error threshold.</p>
<h3>Implementation details</h3>
<p>The Libpolycomp library implements two families of functions which implement polynomial compression:</p>
<ul>
<li>Low-level functions are useful to work with each chunk separately, or when one needs to optimize the compression parameters.</li>
<li>High-level functions are used for compressing/decompressing long streams when no particular needs are required.</li>
</ul>
<p>Moreover, the function implements a number of facilities to compute polynomial fits and Chebyshev transforms of discrete data. Libpolycomp uses the GNU Scientific Library (GSL) to implement the former, and the FFTW library for the latter.</p>
<h3>Low-level functions</h3>
<h3>High-level functions</h3>
<h3>Mathematical routines</h3>
<p>The following set of Libpolycomp routines allows to compute the least squares best fit between a set of floating-point numbers <img class="formulaInl" alt="$x_i$" src="form_0.png"/> (with <img class="formulaInl" alt="$i=1\ldots N$" src="form_1.png"/>) and a polynomial, through the points <img class="formulaInl" alt="$(i, x_i)$" src="form_2.png"/>:</p>
<ul>
<li><a class="el" href="group__poly.html#gafa3292680395741f74f5db0177f2a07b">pcomp_init_poly_fit</a> and <a class="el" href="group__poly.html#gac8e5a21c4a3478a398b08d4d7e0385ea">pcomp_free_poly_fit</a> are used to initialize and free a pcomp_poly_fit_data_t structure. Such structure can be used to apply repeatedly a fitting process to different sets of data, provided that the number of points <img class="formulaInl" alt="$N$" src="form_3.png"/> and the degree of the fitting polynomial stay constant.</li>
<li><a class="el" href="group__poly.html#gaa12ceda9b06ff4d60c21f719da8bd942">pcomp_poly_fit_num_of_samples</a> and <a class="el" href="group__poly.html#gafeec2bb424071797103a20b21d16922c">pcomp_poly_fit_num_of_coeffs</a> are used to retrieve the fields of an instance of the opaque structure pcomp_poly_fit_data_t.</li>
<li><a class="el" href="group__poly.html#gabc5eb759afb7304280d28e1ca53c8ff4">pcomp_run_poly_fit</a> calculates the least-squares best fit between a set of points and a polynomial.</li>
</ul>
<p>The following set of routines compute the Chebyshev transform of a set of floating-point numbers. They are a tiny wrapper around analogous functions of the FFTW library, with the main purpose of using the correct normalization constants in the forward and inverse transforms:</p>
<ul>
<li>pcomp_init_chebyshev and pcomp_free_chebyshev are used to allocate and free a pcomp_chebyshev_t structure, which describes how to compute a Chebyshev transform for a set of <img class="formulaInl" alt="$N$" src="form_3.png"/> numbers.</li>
<li>pcomp_chebyshev_num_of_samples and pcomp_chebyshev_direction are used to query the parameters of an instance of the opaque structure pcomp_chebyshev_t.</li>
<li>pcomp_run_chebyshev applies the Chebyshev transform (either in the forward or inverse direction) to a dataset. </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac8e5a21c4a3478a398b08d4d7e0385ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcomp_free_poly_fit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *&#160;</td>
          <td class="paramname"><em>poly_fit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free an instance of the pcomp_poly_fit_data_t that has been allocated via a call to <a class="el" href="group__poly.html#gafa3292680395741f74f5db0177f2a07b">pcomp_init_poly_fit</a>. </p>
<p>[in] poly_fit Pointer to the structure to be freed </p>

<p>Definition at line <a class="el" href="poly_8c_source.html#l00223">223</a> of file <a class="el" href="poly_8c_source.html">poly.c</a>.</p>

</div>
</div>
<a class="anchor" id="gafa3292680395741f74f5db0177f2a07b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a>* pcomp_init_poly_fit </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_of_samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_of_coeffs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new instance of the pcomp_poly_fit_data_t structure on the heap. </p>
<p>[in] num_of_samples Number of floating-point numbers that must fit the polynomial</p>
<p>[in] num_of_coeffs Number of coefficients of the least-squares fitting polynomial <img class="formulaInl" alt="$p(x)$" src="form_4.png"/>. This is equal to <img class="formulaInl" alt="$\deg p(x) + 1$" src="form_5.png"/>, where <img class="formulaInl" alt="$\deg p(x)$" src="form_6.png"/> is the degree of the polynomial. Thus, for a parabolic polynomial of the form <img class="formulaInl" alt="$p(x) = a x^2 + b x + c$" src="form_7.png"/>, <em>num_of_coeffs</em> = 3.</p>
<dl class="section return"><dt>Returns</dt><dd>A newly created instance of pcomp_poly_fit_data_t structure. This must be freed using <a class="el" href="group__poly.html#gac8e5a21c4a3478a398b08d4d7e0385ea">pcomp_free_poly_fit</a>, once it is no longer used. </dd></dl>

<p>Definition at line <a class="el" href="poly_8c_source.html#l00189">189</a> of file <a class="el" href="poly_8c_source.html">poly.c</a>.</p>

</div>
</div>
<a class="anchor" id="gafeec2bb424071797103a20b21d16922c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t pcomp_poly_fit_num_of_coeffs </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *&#160;</td>
          <td class="paramname"><em>poly_fit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of coefficients of the least-squares fitting polynomial. </p>
<p>[in] poly_fit Pointer to the structure detailing the fit</p>
<dl class="section return"><dt>Returns</dt><dd>The number of coefficients for the fitting polynomial (one plus the polynomial degree) </dd></dl>

<p>Definition at line <a class="el" href="poly_8c_source.html#l00266">266</a> of file <a class="el" href="poly_8c_source.html">poly.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaa12ceda9b06ff4d60c21f719da8bd942"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t pcomp_poly_fit_num_of_samples </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *&#160;</td>
          <td class="paramname"><em>poly_fit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of samples to be used in a polynomial fit. </p>
<p>[in] poly_fit Pointer to the structure detailing the fit</p>
<dl class="section return"><dt>Returns</dt><dd>The number of samples that should be passed to a call to <a class="el" href="group__poly.html#gabc5eb759afb7304280d28e1ca53c8ff4">pcomp_run_poly_fit</a>. </dd></dl>

<p>Definition at line <a class="el" href="poly_8c_source.html#l00247">247</a> of file <a class="el" href="poly_8c_source.html">poly.c</a>.</p>

</div>
</div>
<a class="anchor" id="gabc5eb759afb7304280d28e1ca53c8ff4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcomp_run_poly_fit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a> *&#160;</td>
          <td class="paramname"><em>poly_fit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>coeffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double *&#160;</td>
          <td class="paramname"><em>points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates a polynomial least-squares fit. </p>
<p>Compute a least-squares fit between the numbers <img class="formulaInl" alt="$x_i$" src="form_0.png"/> (with <img class="formulaInl" alt="$i = 1 \ldots N$" src="form_8.png"/>) and the polynomial <img class="formulaInl" alt="$p(x)$" src="form_4.png"/> through the points <img class="formulaInl" alt="$(i, x_i)_{i=1}^N$" src="form_9.png"/>. The coefficients of <img class="formulaInl" alt="$p(x)$" src="form_4.png"/> are saved in <em>coeffs</em>, from the least to the greatest degree.</p>
<p>Here is an example of the usage of this function:</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> points[] = { 1.0, 3.0, 5.0 };</div>
<div class="line"><span class="keywordtype">double</span> coeffs[2];</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> num_of_points = <span class="keyword">sizeof</span>(points) / <span class="keyword">sizeof</span>(points[0]);</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> num_of_coeffs = <span class="keyword">sizeof</span>(coeffs) / <span class="keyword">sizeof</span>(coeffs[0]);</div>
<div class="line"><a class="code" href="struct____pcomp__poly__fit__data__t.html">pcomp_poly_fit_data_t</a>* poly_fit;</div>
<div class="line"></div>
<div class="line">poly_fit = <a class="code" href="group__poly.html#gafa3292680395741f74f5db0177f2a07b">pcomp_init_poly_fit</a>(num_of_points, num_of_coeffs);</div>
<div class="line"><a class="code" href="group__poly.html#gabc5eb759afb7304280d28e1ca53c8ff4">pcomp_run_poly_fit</a>(poly_fit, coeffs, points);</div>
<div class="line">printf(<span class="stringliteral">&quot;The data are fitted by the polynomial y = %f + %f x\n&quot;</span>,</div>
<div class="line">       coeffs[0], coeffs[1]);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">poly_fit</td><td>Pointer to a pcomp_poly_fit_data_t structure, created using the <a class="el" href="group__poly.html#gafa3292680395741f74f5db0177f2a07b">pcomp_init_poly_fit</a> function.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">coeffs</td><td>Pointer to an array where the coefficients of the polynomial will be stored on exit. The array must have room for a number of elements greater or equal than the value returned by <a class="el" href="group__poly.html#gafeec2bb424071797103a20b21d16922c">pcomp_poly_fit_num_of_coeffs</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">points</td><td>Array of numbers <img class="formulaInl" alt="$x_i$" src="form_0.png"/> to use in the fit. The number of elements considered in the fit is equal to the return value of <a class="el" href="group__poly.html#gaa12ceda9b06ff4d60c21f719da8bd942">pcomp_poly_fit_num_of_samples</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PCOMP_STAT_SUCCESS if the fit was computed successfully, PCOMP_STAT_INVALID_FIT if the data are incorrect (e.g., there are fewer samples than unknowns). </dd></dl>

<p>Definition at line <a class="el" href="poly_8c_source.html#l00314">314</a> of file <a class="el" href="poly_8c_source.html">poly.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Oct 23 2015 12:43:43 for Libpolycomp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
